esphome:
  name: laundry_room
  platform: ESP32
  board: nodemcu-32s

wifi:
  ssid: !secret AP
  password: !secret APPW

# Enable logging
logger:

# Enable Home Assistant API
api:
  password: !secret OTA_PW

ota:
  password: !secret OTA_PW

i2c:
  sda: GPIO21
  scl: GPIO22
  scan: False
  
binary_sensor:
  - platform: gpio
    pin: GPIO16
    name: "laundry_motion_1"
    device_class: motion
  - platform: gpio
    pin: GPIO17
    name: "laundry_motion_2"
    device_class: motion
  - platform: gpio
    pin: GPIO18
    name: "laundry_motion_3"
    device_class: motion
  - platform: template
    name: "laundry_leak_furnace"
    device_class: moisture
    lambda: |-
      if (id(laundry_leak_furnace).state > 1) {
        // LEAK.
        return true;
      } else {
        // Nominal
        return false;
      }
  - platform: template
    name: "laundry_leak_sink"
    device_class: moisture
    lambda: |-
      if (id(laundry_leak_sink).state > 1) {
        // LEAK.
        return true;
      } else {
        // Nominal
        return false;
      }
  
sensor:
  - platform: adc
    pin: A0
    name: "laundry_leak_furnace"
    id: "laundry_leak_furnace"
    unit_of_measurement: "V"
    attenuation: 11db
    internal: true
  - platform: adc
    pin: A3
    name: "laundry_leak_sink"
    id: "laundry_leak_sink"
    unit_of_measurement: "V"
    attenuation: 11db
    internal: true
  - platform: bme280
    temperature:
      name: "laundry_temp"
      oversampling: 16x
      unit_of_measurement: "Â°C"
    pressure:
      name: "laundry_humidity"
      unit_of_measurement: "P"
    humidity:
      name: "laundry_pressure"
      unit_of_measurement: "%"
    address: 0x77
    update_interval: 60s

# Individual outputs
switch:
  - platform: gpio
    pin: GPIO0
    name: "Humidifier"
  - platform: gpio
    pin: GPIO1
    name: "laundry_room_litter_box"
