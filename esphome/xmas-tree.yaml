esphome:
  name: xmas-tree
  platform: ESP32
  board: nodemcu-32s

wifi:
  ssid: !secret AP
  password: !secret APPW
  manual_ip:
    static_ip: 192.168.2.114 
    gateway: 192.168.2.1
    subnet: 255.255.255.0
  

# Enable logging
logger:

# Enable Home Assistant API
api:
  encryption:
    key: !secret ENC_KEY

ota:
  password: !secret OTA_PW
 
esp32_ble_tracker:
bluetooth_proxy:
  
light:
  - platform: fastled_clockless
    chipset: WS2811
    pin: GPIO16
    num_leds: 240
    rgb_order: BRG
    name: xmastree
    id: xmastree
    effects:
      - addressable_flicker:
      - addressable_flicker:
          name: Flickering 25
          intensity: 25%
      - addressable_lambda:
          name: Gold Glitter
          update_interval: 12ms
          lambda:
            static int state = 0;
      
            if (initial_run){
              state = 0;
      
              it.all() = ESPColor(218,32,32);
      
              ESP_LOGD("custom", "Gold Glitter");
            } else {
      
              it.all() = ESPColor(218,32,32);
      
              if(state==0){
                int i = rand() % it.size();
                it[i] = ESPColor::WHITE;
                state += 1;
              } else {
                state += 1;
                state = state % 10;
              }
            }
