homeassistant:
  customize:
    light.cabinet_led:
      friendly_name: "Cabinet Lights"
    light.kitchen_sink:
      friendly_name: "Kitchen Sink Light"
    light.kitchen_lamp:
      friendly_name: "Kitchen Light"
    light.kitchen_fan:
      friendly_name: "Kitchen Fan Light"
    binary_sensor.kitchen_leak:
      friendly_name: "Kitchen Sink Leak Sensor"
  
binary_sensor:
  - platform: template
    sensors:
      sliding_glass_door_opened:
        friendly_name: "Sliding Glass Door"
        value_template: >-
          {{ is_state('binary_sensor.sliding_glass_door', 'on') }}

  - platform: mqtt # Garage Door Entry
    state_topic: "hawirelesslink/binary_sensor/centralite_3320l_0e259d4b_1_1280/state"
    name: garage_entry_opened
    payload_on: "on"
    payload_off: "off"

  - platform: mqtt # Kitchen motion
    state_topic: "hawirelesslink/sensor/jasco_products_26931_smart_motion_switch_burglar/state"
    name: kitchen_motion
    payload_on: "8"
    payload_off: "0"
  
          
light:
  - platform : mqtt
    name: "Cabinet_LED"
    state_topic: "/Cabinet_LED/relay/switch"
    command_topic: "/Cabinet_LED/gpio/12"
    payload_on: "1"
    payload_off: "0"
    retain: false
    
  - platform: switch
    name: kitchen_lamp
    entity_id: switch.kitchen_light_switch
    
sensor:
  - platform: mqtt
    name: "kitchen_leak"
    state_topic: "/Kitchen_Leak/moisture_sensor/Analog"

  - platform: mqtt
    name: "kitchen_temp"
    state_topic: "/Kitchen_Leak/under_cabinet/Temperature"
    unit_of_measurement: "Â°C"
    device_class: temperature

  - platform: mqtt
    name: "kitchen_humidity"
    state_topic: "/Kitchen_Leak/under_cabinet/Humidity"
    unit_of_measurement: "%"
    device_class: humidity

  - platform: mqtt
    name: "kitchen_pressure"
    state_topic: "/Kitchen_Leak/under_cabinet/Pressure"
    unit_of_measurement: "hPa"
    device_class: pressure

  - platform: mqtt
    name: garage_entry_temperature
    state_topic: "hawirelesslink/sensor/centralite_3320l_0e259d4b_1_1026/state"
    unit_of_measurement: "Â°F"
    device_class: temperature

automation:
  - id: kitchen_fan_speed
    alias: kitchen_fan_speed
    initial_state: 'off'
    trigger:
    - entity_id: sensor.garage_entry_temperature
      platform: state
    - entity_id: 'fan.kitchen_fan'
      platform: state
    condition:
      - condition: state
        entity_id: 'fan.kitchen_fan'
        state: 'on'
    action:
    - service: fan.set_speed
      data_template:
        entity_id: fan.kitchen_fan
        speed: >
          {% if (states.sensor.garage_entry_temperature.state|float > 80 ) %}
            on
          {% elif (states.sensor.garage_entry_temperature.state|float <= 80 ) and (states.sensor.garage_entry_temperature.state|float > 76 ) %} 
            high
          {% elif (states.sensor.garage_entry_temperature.state|float <= 76 ) and (states.sensor.garage_entry_temperature.state|float > 74 ) %} 
            medium
          {% elif (states.sensor.garage_entry_temperature.state|float <= 74 ) %} 
            low
          {% endif %}
